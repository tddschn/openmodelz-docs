# Create the First Deployment

You could get the help message of the `mdz deploy` command by running `mdz deploy -h`.

```
Deploys a new deployment directly via flags.

Usage:
  mdz deploy [flags]

Examples:
  mdz deploy --image=modelzai/llm-blomdz-560m:23.06.13
  mdz deploy --image=modelzai/llm-blomdz-560m:23.06.13 --name blomdz-560m --node-labels gpu=true,name=node-name

Flags:
  -h, --help                  help for deploy
      --image string          Image to deploy
      --max-replicas int32    Maximum number of replicas (default 1)
      --min-replicas int32    Minimum number of replicas (can be 0) (default 1)
      --name string           Name of inference
  -l, --node-labels strings   Node labels
      --port int32            Port to deploy on (default 8080)

Global Flags:
      --debug        Enable debug logging
  -u, --url string   URL to use for the server (MDZ_URL) (default http://localhost:80)
```

You could deploy a model by running `mdz deploy --image <image>`. The deployment will be accessible from the outside world by default.

```
$ mdz deploy --image aikain/simplehttpserver:0.1 --name simple-server --port 80
Inference simple-server is created
$ mdz list
 NAME          ENDPOINT                                                    STATUS  REPLICAS 
 skilled-slug  http://skilled-slug-crxm19s3602d1zlg.192.168.71.93.nip.io   Ready   1/1      
               http://192.168.71.93.nip.io/inference/skilled-slug.default           
```

You could access the deployment by visiting the endpoint URL. It will be `http://skilled-slug-crxm19s3602d1zlg.192.168.71.93.nip.io` in this case. The endpoint could be accessed from the outside world as well if you've provided the public IP address of your server to the `mdz server start` command.

## Scale your deployment

You could scale your deployment by using the `mdz scale` command.

```bash
$ mdz scale skilled-slug --replicas 3
```

The requests will be load balanced between the replicas of your deployment.

## Debug your deployment

Sometimes you may want to debug your deployment. You could use the `mdz logs` command to get the logs of your deployment.

```bash
$ mdz logs skilled-slug
skilled-slug-6756dd67ff-4bf4g: 10.42.0.1 - - [27/Jul/2023 02:32:16] "GET / HTTP/1.1" 200 -
skilled-slug-6756dd67ff-4bf4g: 10.42.0.1 - - [27/Jul/2023 02:32:16] "GET / HTTP/1.1" 200 -
skilled-slug-6756dd67ff-4bf4g: 10.42.0.1 - - [27/Jul/2023 02:32:17] "GET / HTTP/1.1" 200 -
```

You could also use the `mdz exec` command to execute a command in the container of your deployment. You do not need to ssh into the server to do that.

```
$ mdz exec skilled-slug ps
PID   USER     TIME   COMMAND
    1 root       0:00 /usr/bin/dumb-init /bin/sh -c python3 -m http.server 80
    7 root       0:00 /bin/sh -c python3 -m http.server 80
    8 root       0:00 python3 -m http.server 80
    9 root       0:00 ps
$ mdz exec skilled-slug -ti bash
bash-4.4# uname -r
5.19.0-46-generic
bash-4.4# 
```

Or you could port-forward the deployment to your local machine and debug it locally.

```
$ mdz port-forward skilled-slug 7860
Forwarding inference skilled-slug to local port 7860
```
